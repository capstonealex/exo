<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Alex Exoskeleton: Object dictionary</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Alex Exoskeleton
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Object dictionary<div class="ingroups"><a class="el" href="group___c_o___c_a_nopen.html">CANopen stack</a> &raquo; <a class="el" href="group___c_o___s_d_o.html">SDO server</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>CANopen Object dictionary implementation in CANopenNode.  
<a href="#details">More...</a></p>
<p>CANopen Object dictionary implementation in CANopenNode. </p>
<p>CANopen Object dictionary is a collection of different data items, which can be used by the stack or by the application.</p>
<p>Each Object dictionary entry is located under 16-bit index, as specified by the CANopen:</p><ul>
<li>0x0001..0x025F: Data type definitions.</li>
<li>0x1000..0x1FFF: Communication profile area.</li>
<li>0x2000..0x5FFF: Manufacturer-specific profile area.</li>
<li>0x6000..0x9FFF: Standardized device profile area for eight logical devices.</li>
<li>0xA000..0xAFFF: Standardized network variable area.</li>
<li>0xB000..0xBFFF: Standardized system variable area.</li>
<li>Other: Reserved.</li>
</ul>
<p>If Object dictionary entry has complex data type (array or structure), then 8-bit subIndex specifies the sub-member of the entry. In that case subIndex 0x00 is encoded as uint8_t and specifies the highest available subIndex with that entry. Subindex 0xFF has special meaning in the standard and is not supported by CANopenNode.</p>
<h4><a class="anchor" id="autotoc_md26"></a>
Object type of one Object dictionary entry</h4>
<ul>
<li>NULL: Not used by CANopenNode.</li>
<li>DOMAIN: Block of data of variable length. Data and length are under control of the application.</li>
<li>DEFTYPE: Definition of CANopen basic data type, for example INTEGER16.</li>
<li>DEFSTRUCT: Definition of complex data type - structure, which is used with RECORD.</li>
<li>VAR: Variable of CANopen basic data type. Subindex is 0.</li>
<li>ARRAY: Array of multiple variables of the same CANopen basic data type. Subindex 1..arrayLength specifies sub-member.</li>
<li>RECORD: Record or structure of multiple variables of different CANopen basic data type. Subindex specifies sub-member.</li>
</ul>
<h4><a class="anchor" id="autotoc_md27"></a>
Implementation in CANopenNode</h4>
<p>Object dictionary in CANopenNode is implemented in <a class="el" href="_c_o___o_d_8h.html">CO_OD.h</a> and <a class="el" href="_c_o___o_d_8c.html">CO_OD.c</a> files. These files are application specific and must be generated by Object dictionary editor (application is included by the stack).</p>
<p><a class="el" href="_c_o___o_d_8h.html">CO_OD.h</a> and <a class="el" href="_c_o___o_d_8c.html">CO_OD.c</a> files include:</p><ul>
<li>Structure definitions for records.</li>
<li>Global declaration and initialization of all variables, arrays and records mapped to Object dictionary. Variables are distributed in multiple objects, depending on memory location. This eases storage to different memories in microcontroller, like eeprom or flash.</li>
<li>Constant array of multiple Object dictionary entries of type <a class="el" href="struct_c_o___o_d__entry__t.html">CO_OD_entry_t</a>. If object type is record, then entry includes additional constant array with members of type <a class="el" href="struct_c_o___o_d__entry_record__t.html">CO_OD_entryRecord_t</a>. Each OD entry includes information: index, maxSubIndex, <a class="el" href="group___c_o___s_d_o.html#ga0244f2d504e0de4f14614884d7319fd0">CO_SDO_OD_attributes_t</a>, data size and pointer to variable.</li>
</ul>
<p>Function <a class="el" href="group___c_o___s_d_o.html#gafa0a372b99831b893350fcb7e6146375">CO_SDO_init()</a> initializes object <a class="el" href="struct_c_o___s_d_o__t.html">CO_SDO_t</a>, which includes SDO server and Object dictionary.</p>
<p>Application doesn't need to know anything about the Object dictionary. It can use variables specified in <a class="el" href="_c_o___o_d_8h.html">CO_OD.h</a> file directly. If it needs more control over the CANopen communication with the variables, it can configure additional functionality with function <a class="el" href="group___c_o___s_d_o.html#gab433430abe125bb16c08e7be3e034985">CO_OD_configure()</a>. Additional functionality include: <a class="el" href="group___c_o___s_d_o___o_d__function.html">Object Dictionary function</a> and <a class="el" href="group___c_o___s_d_o.html#ga954a22b6af836082afaf69b0f0cc4c7e">CO_SDO_OD_flags_t</a>.</p>
<p>Interface to Object dictionary is provided by following functions: <a class="el" href="group___c_o___s_d_o.html#ga2532cf0445a91285b6e06e67abb1135d">CO_OD_find()</a> finds OD entry by index, <a class="el" href="group___c_o___s_d_o.html#gad492842213f493a27c274b01c4e02075">CO_OD_getLength()</a> returns length of variable, CO_OD_getAttribute returns attribute and <a class="el" href="group___c_o___s_d_o.html#ga3ee04247261fbe560132584f727ed99d">CO_OD_getDataPointer()</a> returns pointer to data. These functions are used by SDO server and by PDO configuration. They can also be used to access the OD by index like this.</p>
<div class="fragment"><div class="line"><a class="code" href="namespaceinternal.html#a70b0d71269aae660754995bfd78c2366a6a992d5529f459a44fee58c733255e86">index</a> = <a class="code" href="group___c_o___s_d_o.html#ga2532cf0445a91285b6e06e67abb1135d">CO_OD_find</a>(<a class="code" href="group___c_o___c_a_nopen.html#gaa6b0e31a1f760af91bb742c83c00a6c1">CO</a>-&gt;<a class="code" href="struct_c_o__t.html#a016095788ceedcad8b9014c3527a8b64">SDO</a>[0], <a class="code" href="group___c_o___s_d_o.html#gga7940130bc04382e487b1153b8644e17eaf4eb4e0204ae9696f935af5d4fdcff7e">OD_H1001_ERR_REG</a>);</div>
<div class="line"><span class="keywordflow">if</span> (index == 0xffff) {</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line">length = <a class="code" href="group___c_o___s_d_o.html#gad492842213f493a27c274b01c4e02075">CO_OD_getLength</a>(<a class="code" href="group___c_o___c_a_nopen.html#gaa6b0e31a1f760af91bb742c83c00a6c1">CO</a>-&gt;<a class="code" href="struct_c_o__t.html#a016095788ceedcad8b9014c3527a8b64">SDO</a>[0], index, 1);</div>
<div class="line"><span class="keywordflow">if</span> (length != <span class="keyword">sizeof</span>(new_data)) {</div>
<div class="line">   <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">p = <a class="code" href="group___c_o___s_d_o.html#ga3ee04247261fbe560132584f727ed99d">CO_OD_getDataPointer</a>(<a class="code" href="group___c_o___c_a_nopen.html#gaa6b0e31a1f760af91bb742c83c00a6c1">CO</a>-&gt;<a class="code" href="struct_c_o__t.html#a016095788ceedcad8b9014c3527a8b64">SDO</a>[0], index, 1);</div>
<div class="line"><span class="keywordflow">if</span> (p == NULL) {</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"><a class="code" href="_c_o__driver_8h.html#a3850830931ced2bd3d7e15821572bbcc">CO_LOCK_OD</a>();</div>
<div class="line">*p = new_data;</div>
<div class="line"><a class="code" href="_c_o__driver_8h.html#a2477f5d24fd31a9f4052cf451b87809f">CO_UNLOCK_OD</a>();</div>
</div><!-- fragment --><p>Be aware that accessing the OD directly using <a class="el" href="_c_o___o_d_8h.html">CO_OD.h</a> files is more CPU efficient as <a class="el" href="group___c_o___s_d_o.html#ga2532cf0445a91285b6e06e67abb1135d">CO_OD_find()</a> has to do a search everytime it is called. </p>
</div><!-- contents -->
<div class="ttc" id="anamespaceinternal_html_a70b0d71269aae660754995bfd78c2366a6a992d5529f459a44fee58c733255e86"><div class="ttname"><a href="namespaceinternal.html#a70b0d71269aae660754995bfd78c2366a6a992d5529f459a44fee58c733255e86">internal::arg_id_kind::index</a></div><div class="ttdeci">@ index</div></div>
<div class="ttc" id="agroup___c_o___c_a_nopen_html_gaa6b0e31a1f760af91bb742c83c00a6c1"><div class="ttname"><a href="group___c_o___c_a_nopen.html#gaa6b0e31a1f760af91bb742c83c00a6c1">CO</a></div><div class="ttdeci">CO_t * CO</div><div class="ttdef"><b>Definition:</b> CANopen.c:69</div></div>
<div class="ttc" id="astruct_c_o__t_html_a016095788ceedcad8b9014c3527a8b64"><div class="ttname"><a href="struct_c_o__t.html#a016095788ceedcad8b9014c3527a8b64">CO_t::SDO</a></div><div class="ttdeci">CO_SDO_t * SDO[CO_NO_SDO_SERVER]</div><div class="ttdef"><b>Definition:</b> CANopen.h:126</div></div>
<div class="ttc" id="agroup___c_o___s_d_o_html_ga2532cf0445a91285b6e06e67abb1135d"><div class="ttname"><a href="group___c_o___s_d_o.html#ga2532cf0445a91285b6e06e67abb1135d">CO_OD_find</a></div><div class="ttdeci">uint16_t CO_OD_find(CO_SDO_t *SDO, uint16_t index)</div><div class="ttdef"><b>Definition:</b> CO_SDO.c:414</div></div>
<div class="ttc" id="a_c_o__driver_8h_html_a3850830931ced2bd3d7e15821572bbcc"><div class="ttname"><a href="_c_o__driver_8h.html#a3850830931ced2bd3d7e15821572bbcc">CO_LOCK_OD</a></div><div class="ttdeci">#define CO_LOCK_OD()</div><div class="ttdef"><b>Definition:</b> CO_driver.h:73</div></div>
<div class="ttc" id="agroup___c_o___s_d_o_html_ga3ee04247261fbe560132584f727ed99d"><div class="ttname"><a href="group___c_o___s_d_o.html#ga3ee04247261fbe560132584f727ed99d">CO_OD_getDataPointer</a></div><div class="ttdeci">void * CO_OD_getDataPointer(CO_SDO_t *SDO, uint16_t entryNo, uint8_t subIndex)</div><div class="ttdef"><b>Definition:</b> CO_SDO.c:524</div></div>
<div class="ttc" id="agroup___c_o___s_d_o_html_gga7940130bc04382e487b1153b8644e17eaf4eb4e0204ae9696f935af5d4fdcff7e"><div class="ttname"><a href="group___c_o___s_d_o.html#gga7940130bc04382e487b1153b8644e17eaf4eb4e0204ae9696f935af5d4fdcff7e">OD_H1001_ERR_REG</a></div><div class="ttdeci">@ OD_H1001_ERR_REG</div><div class="ttdef"><b>Definition:</b> CO_SDO.h:385</div></div>
<div class="ttc" id="agroup___c_o___s_d_o_html_gad492842213f493a27c274b01c4e02075"><div class="ttname"><a href="group___c_o___s_d_o.html#gad492842213f493a27c274b01c4e02075">CO_OD_getLength</a></div><div class="ttdeci">uint16_t CO_OD_getLength(CO_SDO_t *SDO, uint16_t entryNo, uint8_t subIndex)</div><div class="ttdef"><b>Definition:</b> CO_SDO.c:450</div></div>
<div class="ttc" id="a_c_o__driver_8h_html_a2477f5d24fd31a9f4052cf451b87809f"><div class="ttname"><a href="_c_o__driver_8h.html#a2477f5d24fd31a9f4052cf451b87809f">CO_UNLOCK_OD</a></div><div class="ttdeci">#define CO_UNLOCK_OD()</div><div class="ttdef"><b>Definition:</b> CO_driver.h:74</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
